<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<label for="vueTest">测试defineProperty</label>
<input type="text" id="vueTest">
<input type="text" id="vueTestCopy">
<script>
    // 可以用不同的值来指定
    let obj = {_vueTest: 'wdq'}
    let flag = false
    Object.defineProperty(obj, 'vueTest', {
        // value: '',
        // writable: true, 不能同时声明存储器和value、writable(数据描述器)这两个属性
        configurable: true,
        enumerable: true,
        get() {
            return document.getElementById("vueTest").value + this._vueTest
        },
        set(v) {
            document.getElementById("vueTest").value = v
            document.getElementById("vueTestCopy").value = v
        }
    })
    document.getElementById("vueTest").addEventListener('compositionstart', function (e) {
        flag = true
        console.log(`进了compositionstart`)
    })
    document.getElementById("vueTest").addEventListener('compositionend', function (e) {
        console.log(`compositionend`)
        console.log(e.target.value)
        obj.vueTest = e.target.value
        flag = false
    })
    document.getElementById("vueTest").addEventListener('input', function (e) {
        console.log(`input`)
        if (!flag) {
            console.log(e.target.value)
            obj.vueTest = e.target.value
        }
    })
</script>
</body>
</html>
